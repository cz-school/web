<view class="content order"><cu-custom vue-id="1" bgColor="bg-gradual-pink" isBack="{{true}}" url="/pages/self/self" bind:__l="__l" vue-slots="{{['backText','content']}}"><view slot="backText">返回</view><view slot="content">订单</view></cu-custom><view class="navbar"><block wx:for="{{navList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['tabClick',[index]]]]]}}" class="{{['nav-item',(tabCurrentIndex===index)?'current':'']}}" bindtap="__e">{{''+item.text+''}}</view></block></view><swiper class="swiper-box" current="{{tabCurrentIndex}}" duration="300" data-event-opts="{{[['change',[['changeTab',['$event']]]]]}}" bindchange="__e"><block wx:for="{{navList}}" wx:for-item="tabItem" wx:for-index="tabIndex" wx:key="tabIndex"><swiper-item class="tab-content"><scroll-view class="list-scroll-content" scroll-y data-event-opts="{{[['scrolltolower',[['loadData',['$event']]]]]}}" bindscrolltolower="__e"><block wx:if="{{tabItem.loaded===true&&orderList.length===0}}"><empty vue-id="{{'2-'+tabIndex}}" bind:__l="__l"></empty></block><view></view><view class="orderList"><block wx:for="{{orderList}}" wx:for-item="item" wx:for-index="oindex" wx:key="id"><view class="padding-lg margin-tb-sm radius shadow bg-white"><view class="flex p-xs padding-bottom-xs margin-bottom-xs solids-bottom"><view class="flex-treble  margin-xs"><text class="text-black">{{"订单号:"+item.order_num}}</text></view><view class="flex-sub margin-xs"><block wx:if="{{item.state==0&&item.return_state==0}}"><view class="text-red text-right">待支付</view></block><block wx:if="{{item.state==1&&item.return_state==0}}"><view class="text-red text-right">待发货</view></block><block wx:if="{{item.state==2&&item.return_state==0}}"><view class="text-red text-right">已发货</view></block><block wx:if="{{item.state==3&&item.return_state==0}}"><view class="text-red text-right">待评价</view></block><block wx:if="{{item.state==4&&item.return_state==0}}"><view class="text-red text-right">已完成</view></block><block wx:if="{{item.state==5&&item.return_state==0}}"><view class="text-mauve text-right">订单取消<text class=" margin-left-xs cuIcon-close"></text></view></block><block wx:if="{{item.return_state==1}}"><view class="text-red text-right">发起退货中</view></block><block wx:if="{{item.return_state==2}}"><view class="text-red text-right">退货成功</view></block><block wx:if="{{item.return_state==3}}"><view class="text-red text-right">退货失败</view></block></view></view><view class="order_imgs padding-top-xs"><view class="flex"><block wx:for="{{item.imgList}}" wx:for-item="imgItem" wx:for-index="imgIndex" wx:key="imgIndex"><view class="flex-sub"><view class="grid col-3 grid-square"><view class="bg-img" style="{{'background-image:'+('url('+imgItem.menu_img+')')+';'}}"></view><view><text class="text-cut">{{''+imgItem.menu_name+''}}</text><text class="text-price text-red margin-top-xs">{{''+imgItem.menu_price+" x "+imgItem.menu_num+''}}</text></view></view></view></block></view></view><view class="padding-tb-sm  solids-bottom"><view class="flex"><view class="flex-sub"><text class="text-grey">2019/10/10 11:50:11</text></view><view class="flex-sub text-right"><text class="text-gray">共<text class="text-mauve">{{''+item.imgList.length+''}}</text>件商品实付款<text class="text-price text-red padding-left-xs">{{item.price}}</text></text></view></view></view><view class="tabs margin-top-sm"><block wx:if="{{item.state==0&&item.return_state==0}}"><view class="flex solid-bottom justify-end"><button data-event-opts="{{[['tap',[['cancelOrder',[oindex,'$0'],[[['orderList','id',item.id,'id']]]]]]]}}" class="cu-btn round sm margin-right-sm" bindtap="__e">取消订单</button><button data-event-opts="{{[['tap',[['payment',[oindex,'$0'],[[['orderList','id',item.id,'id']]]]]]]}}" class="cu-btn round bg-orange sm" bindtap="__e">立刻支付</button></view></block><block wx:if="{{item.state>0&&item.state<3&&item.return_state==0}}"><view class="flex solid-bottom justify-end"><button data-event-opts="{{[['tap',[['refund',[oindex,'$0'],[[['orderList','id',item.id,'id']]]]]]]}}" class="cu-btn round sm margin-right-sm" bindtap="__e">退款</button><button data-event-opts="{{[['tap',[['Receivingtake',[oindex,'$0'],[[['orderList','id',item.id,'id']]]]]]]}}" class="cu-btn round bg-orange sm" bindtap="__e">确认收货</button></view></block><block wx:if="{{item.state==3&&item.return_state==0}}"><view class="flex solid-bottom justify-end"><button data-event-opts="{{[['tap',[['refund',[oindex,'$0'],[[['orderList','id',item.id,'id']]]]]]]}}" class="cu-btn round sm margin-right-sm" bindtap="__e">退款</button><button class="cu-btn round bg-orange sm">去评价</button></view></block><block wx:if="{{item.state==4&&item.return_state==0}}"><view class="flex solid-bottom justify-end"><button data-event-opts="{{[['tap',[['deleteOrder',[oindex,'$0'],[[['orderList','id',item.id,'id']]]]]]]}}" class="cu-btn round sm margin-right-sm" bindtap="__e">删除订单</button><button class="cu-btn round bg-orange sm">去评价</button></view></block><block wx:if="{{item.return_state==1}}"><view class="flex solid-bottom justify-end"><button data-event-opts="{{[['tap',[['unrefund',[oindex,'$0'],[[['orderList','id',item.id,'id']]]]]]]}}" class="cu-btn round sm margin-right-sm" bindtap="__e">取消退款</button><button class="cu-btn round bg-orange sm">去评价</button></view></block><block wx:if="{{item.return_state==2}}"><view class="flex solid-bottom justify-end"><button data-event-opts="{{[['tap',[['deleteOrder',[oindex,'$0'],[[['orderList','id',item.id,'id']]]]]]]}}" class="cu-btn round sm margin-right-sm" bindtap="__e">删除订单</button><button class="cu-btn round bg-orange sm">去评价</button></view></block><block wx:if="{{item.return_state==3}}"><view class="flex solid-bottom justify-end"><button data-event-opts="{{[['tap',[['deleteOrder',[oindex,'$0'],[[['orderList','id',item.id,'id']]]]]]]}}" class="cu-btn round sm margin-right-sm" bindtap="__e">删除订单</button><button class="cu-btn round bg-orange sm">去评价</button></view></block></view></view></block></view><uni-load-more vue-id="{{'3-'+tabIndex}}" status="{{tabItem.loadingType}}" bind:__l="__l"></uni-load-more></scroll-view></swiper-item></block></swiper></view>